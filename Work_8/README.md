# 实验八 事务处理和视图

## 一、实验目的

1. 理解事务的概念和 ACID 特性
2. 掌握事务的基本操作(开始、提交、回滚)
3. 理解事务隔离级别及其影响
4. 掌握视图的创建和使用方法

## 二、实验内容

### 一、事务处理

通过以下场景理解不同隔离级别下的事务行为：

#### 场景一：脏读问题
1. 打开两个 MySQL 客户端(事务 A 和事务 B)
2. 设置事务 B 的隔离级别为 READ UNCOMMITTED
3. 事务 A 开始事务,修改某员工工资但不提交
4. 事务 B 读取该员工工资,观察是否能读到未提交的数据
5. 事务 A 回滚
6. 事务 B 再次读取,观察数据变化

#### 场景二：不可重复读问题
1. 设置事务 B 的隔离级别为 READ COMMITTED
2. 事务 B 开始事务并读取某员工工资
3. 事务 A 修改该员工工资并提交
4. 事务 B 在同一事务中再次读取该员工工资,观察数据是否一致

#### 场景三：幻读问题
1. 设置事务 B 的隔离级别为 REPEATABLE READ
2. 事务 B 开始事务并查询某部门的员工数量
3. 事务 A 向该部门插入一名新员工并提交
4. 事务 B 再次查询该部门员工数量,观察结果

#### 场景四：串行化隔离
1. 设置事务 B 的隔离级别为 SERIALIZABLE
2. 重复场景三的操作,观察事务的执行情况

---

### 二、视图

#### 1. 创建简单视图
创建一个视图,显示所有员工的编号、姓名和部门名称

#### 2. 创建带条件的视图
创建一个视图,显示收入大于 2500 的员工信息

#### 3. 创建带计算列的视图
创建一个视图,显示员工的编号、姓名和实际收入(收入-支出)

#### 4. 创建带聚合函数的视图
创建一个视图,显示各部门的部门名称、员工人数和平均工资

#### 5. 通过视图修改数据
通过简单视图修改员工的姓名,观察基表数据的变化

#### 6. 删除视图
删除创建的视图
